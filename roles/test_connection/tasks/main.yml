---
# tasks file for test_connection

#- name: Gather facts from NXOS devices using nxos_facts
#  nxos_facts:
#    gather_subset:
#      - all
#      - "!config"
#  tags: facts_only

#- name: Display Serial Number of the device gathered from ansible_net_serialnum fact
#  debug:
#    msg: DEVICE {{ansible_net_hostname}}, MODEL {{ansible_net_model}}, SERIAL {{ansible_net_serialnum}}, VERSION {{ansible_net_version}}

#- name: Gather show clock
 # nxos_command:
#    commands: show clock
#  register: show_clock_output

#- name: Debug
#  debug:
#    msg: "{{ show_clock_output.stdout_lines }}"

####### 

- name: Precheck with vars in this role
  nxos_command:
    commands: "{{ item }}"
  with_items: "{{ precheck }}"
  register: precheck_vars

- set_fact: 
    my_output: "{{ precheck_vars.results }}"

- name: Debug precheck_vars
  debug:
    var: my_output

###### 
#- name: Precheck with file
#  nxos_config:
#    src: files/precheck_file
#  register: precheck_file_cmd
#
#- debug:
#    msg: "{{ precheck_file_cmd }}"